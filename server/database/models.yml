member:
  hasMany:
    - memberBeneficiary
    - memberLoan
    - memberBusiness
    - memberShares
  hasOne:
    - memberContact
    - memberNominee
    - memberOccupation
  fields:
    - id:
        hidden: true
    - firstName:
        required: true
    - lastName:
        required: true
    - otherName:
        optional: true
    - gender:
        required: true
        options:
          - Female
          - Male
    - phoneNumber:
        required: true
    - title:
        required: true
        options:
          - Mr
          - Mrs
          - Miss
          - Dr
          - Prof
          - Rev
          - Other
    - maritalStatus:
        required: true
        options:
          - Married
          - Single
          - Widowed
          - Divorced
    - dateOfBirth:
        required: true
        validationRule: "^\\d{4}-\\d{2}-\\d{2}$"
    - nationalId:
        required: true
    - utilityBillType:
        required: true
        options:
          - ESCOM
          - Water Board
    - utilityBillNumber:
        required: true
    - fileNumber:
        hidden: true
    - oldFileNumber:
        hidden: true
    - memberIdNumber:
        hidden: true
    - shortMemberId:
        hidden: true
    - dateJoined:
        hidden: true

memberContact:
  belongsTo:
    - member
  fields:
    - id:
        hidden: true
    - memberId:
        hidden: true
    - postalAddress:
        required: true
    - residentialAddress:
        required: true
    - email:
        optional: true
    - homeVillage:
        required: true
    - homeTraditionalAuthority:
        required: true
    - homeDistrict:
        required: true
        options:
          - Dedza
          - Dowa
          - Kasungu
          - Lilongwe
          - Mchinji
          - Nkhotakota
          - Ntcheu
          - Ntchisi
          - Salima
          - Chitipa
          - Karonga
          - Likoma
          - Mzimba
          - Nkhata Bay
          - Rumphi
          - Balaka
          - Blantyre
          - Chikwawa
          - Chiradzulu
          - Machinga
          - Mangochi
          - Mulanje
          - Mwanza
          - Nsanje
          - Thyolo
          - Phalombe
          - Zomba
          - Neno

memberNominee:
  belongsTo:
    - member
  fields:
    - id:
        hidden: true
    - memberId:
        hidden: true
    - name:
        required: true
    - phoneNumber:
        required: true
    - address:
        required: true

memberOccupation:
  belongsTo:
    - member
    - memberLoan
  fields:
    - id:
        hidden: true
    - memberId:
        hidden: true
    - memberLoanId:
        hidden: true
    - employerName:
        required: true
    - grossPay:
        required: true
        numericField: true
    - netPay:
        required: true
        numericField: true
    - jobTitle:
        required: true
    - employerAddress:
        required: true
    - employerPhone:
        required: true
    - periodEmployedInMonths:
        required: true
        numericField: true
    - highestQualification:
        required: true
        options:
          - Tertiary
          - Secondary
          - Primary
          - None

memberBeneficiary:
  belongsTo:
    - member
  settings:
    hasLoops: true
    totalLoops: 4
  fields:
    - id:
        hidden: true
    - memberId:
        hidden: true
    - name:
        required: true
        terminateBlockOnEmpty: true
    - percentage:
        required: true
    - contact:
        required: true

memberBusiness:
  hasMany:
    - memberLastYearBusinessHistory
    - memberNextYearBusinessProjection
  belongsTo:
    - member
    - memberLoan
  fields:
    - id:
        hidden: true
    - memberId:
        hidden: true
    - memberLoanId:
        hidden: true
    - yearsInBusiness:
        required: true
    - businessNature:
        required: true
    - businessName:
        required: true
    - tradingArea:
        required: true

memberLastYearBusinessHistory:
  belongsTo:
    - member
    - memberLoan
    - memberBusiness
  fields:
    - id:
        hidden: true
    - memberId:
        hidden: true
    - memberBusinessId:
        hidden: true
    - memberLoanId:
        hidden: true
    - financialYear:
        required: true
        numericField: true
    - totalIncome:
        required: true
        numericField: true
    - totalCostOfGoods:
        required: true
        numericField: true
    - employeesWages:
        required: true
        numericField: true
    - ownSalary:
        required: true
        numericField: true
    - transport:
        required: true
        numericField: true
    - loanInterest:
        required: true
        numericField: true
    - utilities:
        required: true
        numericField: true
    - rentals:
        required: true
        numericField: true
    - otherCosts:
        optional: true
        numericField: true
    - totalCosts:
        required: true
        numericField: true
    - netProfitLoss:
        required: true
        numericField: true

memberNextYearBusinessProjection:
  belongsTo:
    - member
    - memberLoan
    - memberBusiness
  fields:
    - id:
        hidden: true
    - memberId:
        hidden: true
    - memberBusinessId:
        hidden: true
    - memberLoanId:
        hidden: true
    - financialYear:
        required: true
        numericField: true
    - totalIncome:
        required: true
        numericField: true
    - totalCostOfGoods:
        required: true
        numericField: true
    - employeesWages:
        required: true
        numericField: true
    - ownSalary:
        required: true
        numericField: true
    - transport:
        required: true
        numericField: true
    - loanInterest:
        required: true
        numericField: true
    - utilities:
        required: true
        numericField: true
    - rentals:
        required: true
        numericField: true
    - otherCosts:
        optional: true
        numericField: true
    - totalCosts:
        required: true
        numericField: true
    - netProfitLoss:
        required: true
        numericField: true

memberShares:
  belongsTo:
    - member
  fields:
    - id:
        hidden: true
    - memberId:
        hidden: true
    - numberOfShares:
        required: true
        numericField: true
    - pricePerShare:
        required: true
        numericField: true
    - sharesType::
        required: true
        options:
          - FIXED
          - REDEEMABLE

memberLoan:
  hasOne:
    - memberBusiness
    - memberOccupation
    - memberLoanLiability
    - memberLoanSecurity
    - memberLoanWitness
    - memberOccupationVerification
    - memberLoanApproval
  belongsTo:
    - member
  fields:
    - id:
        hidden: true
    - memberId:
        hidden: true
    - phoneNumber:
        required: true
    - loanAmount:
        required: true
        numericField: true
    - repaymentPeriodInMonths:
        required: true
        numericField: true
    - loanPurpose:
        required: true
    - loanType:
        required: true
        options:
          - PERSONAL
          - BUSINESS
          - AGRICULTURAL
          - EMERGENCY

memberLoanLiability:
  belongsTo:
    - member
    - memberLoan
  settings:
    hasLoops: true
    totalLoops: 2
  fields:
    - id:
        hidden: true
    - memberId:
        hidden: true
    - memberLoanId:
        hidden: true
    - description:
        required: true
        terminateBlockOnEmpty: true
    - value:
        required: true
        numericField: true

memberLoanSecurity:
  belongsTo:
    - member
    - memberLoan
  fields:
    - id:
        hidden: true
    - memberId:
        hidden: true
    - memberLoanId:
        hidden: true
    - description:
        required: true
        skipBlockOnEmpty: true
    - value:
        required: true
        numericField: true
    - serialNumber:
        optional: true
        restartBlock: true

memberLoanWitness:
  belongsTo:
    - member
    - memberLoan
  fields:
    - id:
        hidden: true
    - memberId:
        hidden: true
    - memberLoanId:
        hidden: true
    - name:
        required: true
    - telephone:
        required: true
    - address:
        required: true
    - date:
        required: true
        validationRule: "^\\d{4}-\\d{2}-\\d{2}$"

memberOccupationVerification:
  belongsTo:
    - member
    - memberLoan
  fields:
    - id:
        hidden: true
    - memberId:
        hidden: true
    - memberLoanId:
        hidden: true
    - memberOccupationId:
        hidden: true
    - jobVerified:
        required: true
        options:
          - Yes
          - No
    - grossVerified:
        required: true
        options:
          - Yes
          - No
    - netVerified:
        required: true
        options:
          - Yes
          - No

memberLoanApproval:
  belongsTo:
    - member
    - memberLoan
  fields:
    - id:
        hidden: true
    - memberId:
        hidden: true
    - memberLoanId:
        hidden: true
    - loanStatus:
        required: true
        default: PENDING
        adminOnly: true
        options:
          - PENDING
          - APPROVED
          - REJECTED
    - amountRecommended:
        required: true
        numericField: true
        adminOnly: true
        default: 0
    - approvedBy:
        adminOnly: true
    - approvalDate:
        adminOnly: true
    - amountApproved:
        numericField: true
        adminOnly: true
    - verifiedBy:
        hidden: true
    - dateVerified:
        hidden: true
    - denialOrPartialReason:
        adminOnly: true

user:
  fields:
    - id:
        hidden: true
    - name:
        required: true
    - username:
        required: true
    - password:
        required: true
    - role:
        required: true
        options:
          - Member
          - Admin
          - Cashier
          - Accountant
          - Loans Officer
          - Manager

account:
  hasMany:
    - accountJournal
    - accountTransaction
  fields:
    - id:
        hidden: true
    - accountName:
        required: true

accountTransaction:
  hasMany:
    - accountJournal
  belongsTo:
    - account
  fields:
    - id:
        hidden: true
    - accountTransactionDate:
        hidden: true
    - accountId:
        hidden: true
    - description:
        required: true

accountJournal:
  belongsTo:
    - account
  fields:
    - id:
        hidden: true
    - accountId:
        hidden: true
    - accountTransactionId:
        hidden: true
    - debit:
        numericField: true
        required: true
    - credit:
        numericField: true
        required: true
